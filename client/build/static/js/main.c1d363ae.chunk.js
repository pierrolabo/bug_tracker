(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,a){"use strict";a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return R})),a.d(t,"c",(function(){return I}));var n=a(33),r=a(62),c=a(31),l=a(84),s=a(57),o=a(86),i=a.n(o),u=a(40),d=a(3),m={msg:{},status:null,id:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.u:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case d.h:return{msg:{},status:null,id:null};default:return e}},h=a(7),E={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:null,role:null,user:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.Z:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case d.Y:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload,role:t.payload.role});case d.H:case d.L:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)(Object(h.a)({},e),t.payload),{},{isAuthenticated:!0,role:t.payload.user.role,isLoading:!1});case d.g:case d.G:case d.I:case d.K:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{token:null,isAuthenticated:!1,isLoading:!1});default:return e}},g=a(29),j={users:[],user:null,loading:!1,loadingUser:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.C:return Object(h.a)(Object(h.a)({},e),{},{user:t.payload,loadingUser:!1});case d.D:return Object(h.a)(Object(h.a)({},e),{},{users:t.payload,loading:!1});case d.f:return Object(h.a)(Object(h.a)({},e),{},{users:[t.payload].concat(Object(g.a)(e.users))});case d.U:var a=e.users.filter((function(e){return e._id!==t.payload._id}));return Object(h.a)(Object(h.a)({},e),{},{users:[t.payload].concat(Object(g.a)(a))});case d.t:return Object(h.a)(Object(h.a)({},e),{},{users:e.users.filter((function(e){return e.id!==t.payload}))});case d.X:return Object(h.a)(Object(h.a)({},e),{},{users:[],loading:!0});case d.Z:return Object(h.a)(Object(h.a)({},e),{},{user:null,loadingUser:!0});case d.W:return Object(h.a)(Object(h.a)({},e),{},{users:[t.payload].concat(Object(g.a)(e.users))});case d.V:return Object(h.a)({},e);case d.E:return Object(h.a)(Object(h.a)({},e),{},{users:[],user:null,loading:!1});case d.F:return Object(h.a)(Object(h.a)({},e),{},{user:null,loading:!1});default:return e}},b={tickets:[],ticket:{_id:1,status:"loading",assigned_to:1,completed_by:"fake",isCompleted:!1,projectID:1,title:"fake",description:"fake",created_by:"fake",date:Date.now,answers:[]},isLoading:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.O:case d.k:case d.r:return Object(h.a)(Object(h.a)({},e),{},{ticket:t.payload});case d.j:return Object(h.a)(Object(h.a)({},e),{},{ticket:[]});case d.s:return Object(h.a)({},e);case d.y:return Object(h.a)(Object(h.a)({},e),{},{tickets:t.payload,isLoading:!1});case d.x:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0,project:[]});case d.B:return Object(h.a)(Object(h.a)({},e),{},{ticket:t.payload[0],isLoading:!1});case d.M:case d.N:return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case d.T:var a=e.tickets.map((function(e){return e._id===t.payload._id?t.payload:e}));return Object(h.a)(Object(h.a)({},e),{},{tickets:a});case d.z:case d.A:case d.S:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});case d.l:return Object(h.a)({},e);case d.n:return Object(h.a)(Object(h.a)({},e),{},{tickets:t.payload});case d.m:return Object(h.a)({},e);case d.d:return Object(h.a)(Object(h.a)({},e),{},{ticket:t.payload});case d.e:return Object(h.a)({},e);default:return e}},y={projects:[],isLoading:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.v:return Object(h.a)(Object(h.a)({},e),{},{projects:t.payload,isLoading:!1});case d.J:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case d.w:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});case d.R:var a=e.projects.map((function(e){return e._id===t.payload._id?t.payload:e}));return Object(h.a)(Object(h.a)({},e),{},{projects:a});case d.Q:case d.P:return Object(h.a)({},e);case d.a:case d.b:return Object(h.a)({},e);case d.c:return Object(h.a)(Object(h.a)({},e),{},{projects:[e.projects,t.payload.project]});case d.o:case d.p:return Object(h.a)({},e);case d.q:return Object(h.a)(Object(h.a)({},e),{},{projects:e.projects.filter((function(e){return e._id!==t.payload.id}))});case d.i:return Object(h.a)(Object(h.a)({},e),{},{projects:[]});default:return e}},C=function(e){return Object(c.c)({router:Object(u.b)(e),error:p,auth:f,user:v,ticket:O,project:k})},S=Object(n.a)(),_={key:"root",storage:i.a},T=Object(s.a)(_,C(S)),A=[l.a,Object(r.a)(S)],D=c.a.apply(void 0,A),N=Object(c.d)(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),I=Object(c.e)(T,N),R=Object(s.b)(I)},152:function(e,t,a){},3:function(e,t,a){"use strict";a.d(t,"Z",(function(){return n})),a.d(t,"Y",(function(){return r})),a.d(t,"g",(function(){return c})),a.d(t,"H",(function(){return l})),a.d(t,"G",(function(){return s})),a.d(t,"I",(function(){return o})),a.d(t,"L",(function(){return i})),a.d(t,"K",(function(){return u})),a.d(t,"u",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"D",(function(){return p})),a.d(t,"C",(function(){return h})),a.d(t,"f",(function(){return E})),a.d(t,"U",(function(){return f})),a.d(t,"W",(function(){return g})),a.d(t,"X",(function(){return j})),a.d(t,"t",(function(){return v})),a.d(t,"E",(function(){return b})),a.d(t,"F",(function(){return O})),a.d(t,"V",(function(){return y})),a.d(t,"x",(function(){return k})),a.d(t,"A",(function(){return C})),a.d(t,"B",(function(){return S})),a.d(t,"y",(function(){return _})),a.d(t,"M",(function(){return T})),a.d(t,"N",(function(){return A})),a.d(t,"z",(function(){return D})),a.d(t,"T",(function(){return N})),a.d(t,"S",(function(){return I})),a.d(t,"l",(function(){return R})),a.d(t,"n",(function(){return U})),a.d(t,"m",(function(){return L})),a.d(t,"d",(function(){return P})),a.d(t,"e",(function(){return w})),a.d(t,"r",(function(){return x})),a.d(t,"s",(function(){return G})),a.d(t,"j",(function(){return M})),a.d(t,"k",(function(){return F})),a.d(t,"O",(function(){return J})),a.d(t,"v",(function(){return V})),a.d(t,"J",(function(){return W})),a.d(t,"w",(function(){return K})),a.d(t,"a",(function(){return z})),a.d(t,"o",(function(){return Y})),a.d(t,"q",(function(){return X})),a.d(t,"p",(function(){return H})),a.d(t,"P",(function(){return B})),a.d(t,"R",(function(){return Z})),a.d(t,"Q",(function(){return q})),a.d(t,"c",(function(){return Q})),a.d(t,"b",(function(){return $})),a.d(t,"i",(function(){return ee}));var n="USER_LOADING",r="USER_LOADED",c="AUTH_ERROR",l="LOGIN_SUCCESS",s="LOGIN_FAIL",o="LOGOUT_SUCCESS",i="REGISTER_SUCCESS",u="REGISTER_FAIL",d="GET_ERRORS",m="CLEAR_ERRORS",p="GET_USERS",h="GET_USER",E="ADD_USER",f="UPDATE_USER",g="UPDATE_USER_ROLE",j="USERS_LOADING",v="DELETE_USER",b="GET_USERS_FAIL",O="GET_USER_FAIL",y="UPDATE_USER_FAIL",k="GET_TICKET",C="GET_TICKET_FAIL",S="GET_TICKET_SUCCESS",_="GET_TICKETS",T="TICKETS_LOADING",A="TICKET_LOADING",D="GET_TICKETS_FAIL",N="UPDATE_TICKET_SUCCESS",I="UPDATE_TICKET_FAIL",R="CREATE_TICKET",U="CREATE_TICKET_SUCCESS",L="CREATE_TICKET_ERROR",P="ADD_REPLY",w="ADD_REPLY_FAIL",x="DELETE_REPLY",G="DELETE_REPLY_FAIL",M="CLEAR_TICKET",F="COMPLETED_TICKET",J="UPDATE_ASSIGNED_TO",V="GET_PROJECTS",W="PROJECTS_LOADING",K="GET_PROJECTS_FAIL",z="ADD_PROJECT",Y="DELETE_PROJECT",X="DELETE_PROJECT_SUCCESS",H="DELETE_PROJECT_FAIL",B="UPDATE_PROJECT",Z="UPDATE_PROJECT_SUCCESS",q="UPDATE_PROJECT_FAIL",Q="ADD_PROJECT_SUCCESS",$="ADD_PROJECT_FAIL",ee="CLEAR_PROJECTS"},83:function(e,t,a){"use strict";(function(e){var n=a(0),r=a.n(n),c=a(40),l=a(48),s=a(91);a(151),a(152);t.a=Object(l.hot)(e)((function(e){var t=e.history;return r.a.createElement(c.a,{history:t},r.a.createElement(s.a,null))}))}).call(this,a(61)(e))},91:function(e,t,a){"use strict";var n=a(10),r=a(11),c=a(13),l=a(12),s=a(0),o=a.n(s),i=a(46),u=a(14),d=a(171),m=a(172),p=a(47),h=function(e){var t=e.children,a=e.auth,n=Object(p.a)(e,["children","auth"]);return o.a.createElement(i.b,Object.assign({},n,{render:function(e){return a.isAuthenticated?t:o.a.createElement(i.a,{to:"/login"})}}))},E=function(e){var t=e.children,a=e.auth,n=e.role,r=Object(p.a)(e,["children","auth","role"]);return o.a.createElement(i.b,Object.assign({},r,{render:function(e){return a.isAuthenticated&&"ADMIN"===n?t:o.a.createElement(i.a,{to:"/home"})}}))},f=a(9),g=a(155),j=a(156),v=a(157),b=a(158),O=a(159),y=a(160),k=a(161),C=a(162),S=a(17),_=a.n(S),T=a(3),A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:T.u,payload:{msg:e,status:t,id:a}}},D=function(){return{type:T.h}},N=function(){return function(e,t){e(I()),_.a.get("/api/projects",R()).then((function(t){e({type:T.v,payload:t.data})})).catch((function(t){e(A(t.response.data,t.response.status)),e({type:T.w})}))}},I=function(){return{type:T.J}},R=function(){var e=u.c.getState().auth.token,t={headers:{"Content-type":"application/json"}};return e&&(t.headers["x-auth-token"]=e),t},U=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={isOpen:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e.handleClick=function(){e.props.clearProjects(),e.props.logout()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=o.a.createElement(s.Fragment,null,o.a.createElement(g.a,null,o.a.createElement("span",{className:"navbar-text mr-3"},o.a.createElement("strong",null,a?"Welcome ".concat(a.name):""))),o.a.createElement(g.a,null,o.a.createElement(j.a,{onClick:this.handleClick,href:"#"},"Logout"))),r=o.a.createElement(s.Fragment,null,o.a.createElement(g.a,null,o.a.createElement(j.a,{href:"/register"},"Register")),o.a.createElement(g.a,null,o.a.createElement(j.a,{href:"/login"},"Login")));return o.a.createElement("div",{className:"navbar-container "},o.a.createElement(v.a,{color:"dark",dark:!0,expand:"sm",className:"mb-8"},o.a.createElement(b.a,null,o.a.createElement(O.a,{className:"d-xl-none",href:"/"},"Ticketter"),o.a.createElement(y.a,{onClick:this.toggle}),o.a.createElement(k.a,{isOpen:this.state.isOpen,navbar:!0},o.a.createElement(C.a,{className:"ml-auto",navbar:!0},t?n:r)))))}}]),a}(s.Component),L=Object(f.c)((function(e){return{auth:e.auth}}),{clearProjects:function(){return function(e){e({type:T.i})}},logout:function(){return u.a.push("/"),{type:T.I}}})(U),P=a(163),w=a(164),x=function(e){var t=e.tickets,a=function(e){return u.a.push("/tickets/view/".concat(e.target.id))};return o.a.createElement(P.a,null,o.a.createElement(w.a,{active:!0,tag:"button",onClick:function(){return u.a.push("/tickets")}},"All my Tickets"),t.map((function(e,t){return o.a.createElement(w.a,{onClick:a,id:e._id,tag:"button",action:!0},e.title)})))},G=function(e){var t=e.projects,a=function(e){return u.a.push("/project/view/".concat(e.target.id))};return o.a.createElement(P.a,null,o.a.createElement(w.a,{active:!0,tag:"button",onClick:function(){return u.a.push("/projects")}},"All my Projects"),t.map((function(e,t){return o.a.createElement(w.a,{onClick:a,id:e._id,tag:"button",action:!0},e.name)})))},M=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,null,o.a.createElement(w.a,{active:!0,tag:"button",onClick:function(){return u.a.push("/tickets")}},"Tickets"),o.a.createElement(w.a,{onClick:function(){return u.a.push("/tickets/create")}},"Create Ticket")),o.a.createElement(P.a,null,o.a.createElement(w.a,{active:!0,tag:"button",onClick:function(){return u.a.push("/projects/view")}},"Projects"),o.a.createElement(w.a,{onClick:function(){return u.a.push("/projects/create")}},"Create Projects")),o.a.createElement(P.a,null,o.a.createElement(w.a,{active:!0,tag:"button",onClick:function(){return u.a.push("/users/create")}},"User Roles")))},F=function(e){var t=e.tickets,a=e.projects;return o.a.createElement("div",{className:"sidebar"},"ADMIN"!==e.role?o.a.createElement(o.a.Fragment,null,o.a.createElement(x,{tickets:t}),o.a.createElement(G,{projects:a})):"","ADMIN"===e.role?o.a.createElement(M,null):"")},J=a(165),V=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(J.a,{fluid:!0},o.a.createElement(b.a,{fluid:!0},o.a.createElement("h1",{className:"display-3"},"Ticketter"),o.a.createElement("p",{className:"lead"},"The simplest ticket manager for your team :)"))),o.a.createElement("h2",null,"Functionnalities"))}}]),a}(s.Component),W=function(){return function(e,t){e(K()),_.a.get("/api/tickets",z()).then((function(t){e({type:T.y,payload:t.data})})).catch((function(t){e(A(t.response.data,t.response.status)),e({type:T.z})}))}},K=function(){return{type:T.M}},z=function(){var e=u.c.getState().auth.token,t={headers:{"Content-type":"application/json"}};return e&&(t.headers["x-auth-token"]=e),t},Y=a(166),X=a(167),H=a(168),B=a(169),Z=a(170),q=a(20),Q=a(21),$=function(e){var t=e.ticketInfo,a=t.ticketNumber,n=t.ticketType,r=o.a.createElement(Y.a,null,o.a.createElement(X.a,null,o.a.createElement(H.a,{className:"text-center"},"New Tickets"),o.a.createElement(B.a,{className:"text-center"},o.a.createElement(q.a,{icon:Q.c})," ",a),o.a.createElement("div",{className:"text-center"},"".concat(a,"%")),o.a.createElement(Z.a,{color:"warning",value:a}))),c=o.a.createElement(Y.a,null,o.a.createElement(X.a,null,o.a.createElement(H.a,{className:"text-center"},"Tickets In Progress"),o.a.createElement(B.a,{className:"text-center"},o.a.createElement(q.a,{icon:Q.c})," ",a),o.a.createElement("div",{className:"text-center"},"".concat(a,"%")),o.a.createElement(Z.a,{color:"success",value:a}))),l=o.a.createElement(Y.a,null,o.a.createElement(X.a,null,o.a.createElement(H.a,{className:"text-center"},"Urgent Tickets"),o.a.createElement(B.a,{className:"text-center"},o.a.createElement(q.a,{icon:Q.c})," ",a),o.a.createElement("div",{className:"text-center"},"".concat(a,"%")),o.a.createElement(Z.a,{color:"danger",value:a}))),s=o.a.createElement(Y.a,null,o.a.createElement(X.a,null,o.a.createElement(H.a,{className:"text-center"},"Not Resolved Tickets"),o.a.createElement(B.a,{className:"text-center"},o.a.createElement(q.a,{icon:Q.c})," ",a),o.a.createElement("div",{className:"text-center"},"".concat(a,"%")),o.a.createElement(Z.a,{color:"info",value:a})));return o.a.createElement("div",null,function(e){switch(e){case"NEW":return r;case"PROGRESS":return c;case"URGENT":return l;case"UNRESOLVED":return s;default:return""}}(n))},ee=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getTickets()}},{key:"render",value:function(){var e={ticketNumber:0,ticketType:"NEW"},t={ticketNumber:50,ticketType:"PROGRESS"},a={ticketNumber:25,ticketType:"URGENT"},n={ticketNumber:5,ticketType:"UNRESOLVED"},r=this.props.ticket.tickets;return r&&(e.ticketNumber=r.filter((function(e){return"NEW"===e.status})).length,t.ticketNumber=r.filter((function(e){return"PROGRESS"===e.status})).length,a.ticketNumber=r.filter((function(e){return"URGENT"===e.status})).length,n.ticketNumber=r.filter((function(e){return"UNRESOLVED"!==e.status})).length),o.a.createElement(b.a,null,o.a.createElement(b.a,{className:"dashboard"},o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement($,{ticketInfo:e})),o.a.createElement(m.a,null,o.a.createElement($,{ticketInfo:t})),o.a.createElement(m.a,null,o.a.createElement($,{ticketInfo:a})),o.a.createElement(m.a,null,o.a.createElement($,{ticketInfo:n})))))}}]),a}(s.Component),te=Object(f.c)((function(e){return{auth:e.auth,ticket:e.ticket}}),{getTickets:W})(ee),ae=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"commponentDidMount",value:function(){this.props.getTickets(),this.props.getProjects()}},{key:"render",value:function(){var e=this.props.auth.role;return o.a.createElement("div",{className:"home"},"ADMIN"===e?o.a.createElement(te,null):"<h1>lol</h1>")}}]),a}(s.Component),ne=Object(f.c)((function(e){return{auth:e.auth,router:e.router,isLoading:e.ticket.isLoading,project:e.project,ticket:e.ticket}}),{getTickets:W,getProjects:N})(ae),re=a(22),ce=a(173),le=a(174),se=a(175),oe=a(176),ie=a(177),ue=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={name:"",lastname:"",password:"",msg:null},e.onChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n={name:a.name,lastname:a.lastname,email:a.email,password:a.password};e.props.register(n)},e}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.error;a!==e.error&&("REGISTER_FAIL"===a.id?this.setState({msg:a.msg.msg}):this.setState({msg:null}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"register"},o.a.createElement("h1",null,"msg: ",this.state.msg),o.a.createElement(ce.a,{onSubmit:this.onSubmit},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"name"},"Name"),o.a.createElement(oe.a,{type:"text",name:"name",id:"name",placeholder:"Name",className:"mb-3",onChange:this.onChange}),o.a.createElement(se.a,{for:"lastname"},"Lastname"),o.a.createElement(oe.a,{type:"text",name:"lastname",id:"lastname",placeholder:"lastname",className:"mb-3",onChange:this.onChange}),o.a.createElement(se.a,{for:"email"},"Email"),o.a.createElement(oe.a,{type:"email",name:"email",id:"email",placeholder:"Email",className:"mb-3",onChange:this.onChange}),o.a.createElement(se.a,{for:"Password"},"Password"),o.a.createElement(oe.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:this.onChange}),o.a.createElement(ie.a,{color:"dark",block:!0},"Register"))))}}]),a}(s.Component),de=Object(f.c)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:function(e){var t=e.name,a=e.lastname,n=e.email,r=e.password;return function(e){var c=JSON.stringify({name:t,lastname:a,email:n,password:r});_.a.post("/api/users",c,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.H,payload:t.data}),u.a.push("/home")})).catch((function(t){e(A(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:T.G})}))}},clearErrors:D})(ue),me=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={name:"",surname:"",password:"",msg:null},e.onChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n={email:a.email,password:a.password};e.props.login(n)},e}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.error;a!==e.error&&("REGISTER_FAIL"===a.id?this.setState({msg:a.msg.msg}):this.setState({msg:null}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"Login"},o.a.createElement("h1",null,"msg: ",this.state.msg),o.a.createElement(ce.a,{onSubmit:this.onSubmit},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"email"},"Email"),o.a.createElement(oe.a,{type:"email",name:"email",id:"email",placeholder:"Email",className:"mb-3",onChange:this.onChange}),o.a.createElement(se.a,{for:"Password"},"Password"),o.a.createElement(oe.a,{type:"password",name:"password",id:"password",placeholder:"Password",className:"mb-3",onChange:this.onChange}),o.a.createElement(ie.a,{color:"dark",block:!0},"Login"))))}}]),a}(s.Component),pe=Object(f.c)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{login:function(e){var t=e.email,a=e.password;return function(e,n){var r=JSON.stringify({email:t,password:a});_.a.post("/api/auth",r,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.H,payload:t.data}),u.a.push("/home")})).catch((function(t){e(A(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:T.G})}))}},clearErrors:D})(me),he=function(){return function(e,t){e(Ee()),_.a.get("/api/users",fe()).then((function(t){e({type:T.D,payload:t.data})})).catch((function(t){e(A(t.response.data,t.response.status)),e({type:T.E})}))}},Ee=function(){return{type:T.X}},fe=function(){var e=u.c.getState().auth.token,t={headers:{"Content-type":"application/json"}};return e&&(t.headers["x-auth-token"]=e),t},ge=a(29),je=a(181),ve=a(182),be=a(191),Oe=a(178),ye=a(179),ke=a(180),Ce=a(23),Se=function(e){var t=e.projects,a=e.id;return o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned Projects"),o.a.createElement(Ce.a,{name:"assignedProject",onChange:e.handleChange,options:function(e){try{return e.map((function(e){return{value:e._id,label:"".concat(e.name)}}))}catch(t){console.log("err: ",t)}}(t),defaultValue:function(e,t){return e.map((function(e){if(e.userList.includes(t))return{value:e._id,label:e.name}}))}(t,a),isMulti:!0}))},_e=[{value:"ADMIN",label:"ADMIN"},{value:"USER",label:"USER"},{value:"PROJECT_MANAGER",label:"PROJECT_MANAGER"},{value:"DEVELOPER",label:"DEVELOPER"}],Te=function(e){var t=e.modal,a=e.name,n=e.lastname,r=e.email,c=e.address,l=e.city,s=e.state,i=e.zip,u=(e.orgs,e.userRole),p=e.toggleModal,h=e.handleChange,E=e.handleChangeRolesSelect,f=(e.handleChangeOrgsSelect,e.handleChangeProjects),g=e.handleSubmit,j=e.errorModal,v=e.users,b=e.id,O=e.projects;return o.a.createElement(be.a,{isOpen:t,toggle:p},o.a.createElement(Oe.a,{toggle:p},"Edit User"),o.a.createElement(ye.a,null,j?o.a.createElement(ke.a,{color:"danger"},j.msg):null,o.a.createElement(ce.a,{onSubmit:g},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"name"},"name"),o.a.createElement(oe.a,{type:"name",name:"name",id:"name",placeholder:"name",value:a||"",className:"mb-3",onChange:h}),o.a.createElement(se.a,{for:"lastname"},"Lastname"),o.a.createElement(oe.a,{type:"lastname",name:"lastname",id:"lastname",placeholder:"lastname",className:"mb-3",value:n||"",onChange:h}),o.a.createElement(se.a,{for:"email"},"Email"),o.a.createElement(oe.a,{type:"email",name:"email",id:"email",placeholder:"Email",value:r||"",className:"mb-3",onChange:h,valid:!0}),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"exampleAddress"},"Address"),o.a.createElement(oe.a,{type:"address",name:"address",id:"address",placeholder:"1234 Main St",value:c||"",onChange:h})),o.a.createElement(d.a,{form:!0},o.a.createElement(m.a,{md:6},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"city"},"City"),o.a.createElement(oe.a,{type:"city",name:"city",id:"city",value:l,onChange:h}))),o.a.createElement(m.a,{md:4},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"state"},"State"),o.a.createElement(oe.a,{type:"state",name:"state",id:"state",value:s,onChange:h}))),o.a.createElement(m.a,{md:2},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"zip"},"Zip"),o.a.createElement(oe.a,{type:"zip",name:"zip",id:"zip",value:i,onChange:h})))),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"roleSelect"},"Select a role for the user"),o.a.createElement(Ce.a,{name:"roleSelect",onChange:E,defaultValue:_e.filter((function(e){return e.value===u})),options:_e})),o.a.createElement(Se,{users:v,projects:O,id:b,handleChange:f}),o.a.createElement(ie.a,{color:"dark",style:{marginTop:"2rem"},block:!0},"Save")))))},Ae=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={modal:!1,name:null,lastname:null,email:null,role:null,address:null,city:"",state:"",zip:"",id:null,orgs:[],prevProjects:[],nextProjects:null},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.handleChangeRolesSelect=function(t){e.setState({role:t.value})},e.handleChangeOrgsSelect=function(t){if(t){var a=t.map((function(e){return e.value}));e.setState({orgs:Object(ge.a)(a)})}else e.setState({orgs:[]})},e.handleChangeProjects=function(t){var a=[];t&&(a=t.map((function(e){return e.value}))),e.setState({nextProjects:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.name,r=a.lastname,c=a.address,l=a.city,s=a.zip,o=a.state,i={name:n,lastname:r,address:c,email:a.email,role:a.role,id:a.id,orgs:a.orgs,city:l,state:o,zip:s,nextProjects:a.nextProjects};e.props.updateUser(i),e.setState({modal:!1,name:null,lastname:null,email:null,role:null,address:null,city:"",state:"",zip:"",id:null,orgs:[],nextProjects:null})},e.toggleModal=function(t){if(!e.state.modal){var a=t.target.parentNode.id;a||(a=t.target.id);try{var n=e.props.users.filter((function(e){return e._id===a}))[0],r=n.name,c=n.lastname,l=n.address,s=n.city,o=n.zip,i=n.state,u=n.email,d=n.role,m=n.orgs;e.setState({modal:!e.state.modal,id:a,name:r,lastname:c,email:u,role:d,address:l,city:s,zip:o,state:i,orgs:m})}catch(p){console.log(p)}}e.setState({modal:!e.state.modal})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(),this.props.getProjects()}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.projects;return o.a.createElement(b.a,null,o.a.createElement(Te,{modal:this.state.modal,handleChange:this.handleChange,handleChangeRolesSelect:this.handleChangeRolesSelect,handleChangeOrgsSelect:this.handleChangeOrgsSelect,handleChangeProjects:this.handleChangeProjects,handleSubmit:this.handleSubmit,toggleModal:this.toggleModal,name:this.state.name,lastname:this.state.lastname,email:this.state.email,userRole:this.state.role,address:this.state.address,city:this.state.city,zip:this.state.zip,state:this.state.state,orgs:this.state.orgs,projects:n,users:a,id:this.state.id}),o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"User List"),o.a.createElement(X.a,null,o.a.createElement(ve.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"First Name"),o.a.createElement("th",null,"Last Name"),o.a.createElement("th",null,"Email"),o.a.createElement("th",null,"Role"),o.a.createElement("th",null,"Edit"))),o.a.createElement("tbody",null,a.map((function(t,a){return o.a.createElement("tr",{key:t._id},o.a.createElement("th",{scope:"row"},a),o.a.createElement("th",null,t.name),o.a.createElement("th",null,t.lastname),o.a.createElement("th",null,t.email),o.a.createElement("th",null,t.role),o.a.createElement("th",{onClick:e.toggleModal,id:t._id},o.a.createElement(q.a,{id:t._id,icon:Q.e})))})))))))}}]),a}(s.Component),De=Object(f.c)((function(e){return{auth:e.auth,loadingUser:e.user.loadingUser,user:e.user,projects:e.project.projects}}),{updateUser:function(e){return function(t,a){_.a.put("/api/users",e,fe(a)).then((function(e){t(N()),t({type:T.U,payload:e.data})})).catch((function(e){t(A(e.response.data,e.response.status)),t({type:T.V})}))}},getUsers:he,getProjects:N})(Ae),Ne=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this.props.user.users;return o.a.createElement("div",{className:"users-container"},o.a.createElement("h1",null,"User Roles"),o.a.createElement(De,{users:e}))}}]),a}(s.Component),Ie=Object(f.c)((function(e){return{auth:e.auth,user:e.user}}),{getUsers:he})(Ne),Re=function(e){var t=e.projects,a=e.id;return o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned Project"),o.a.createElement(Ce.a,{name:"assignedProject",onChange:e.handleChange,options:function(e){return e.map((function(e){return{value:e._id,label:e.name}}))}(t),defaultValue:function(e,t){try{var a=e.filter((function(e){return e._id===t}))[0];if(a)return[{value:a._id,label:a.name}];console.log("not found: ",a)}catch(n){console.log(n)}}(t,a)}))},Ue=[{value:"NEW",label:"NEW"},{value:"PROGRESS",label:"PROGRESS"},{value:"URGENT",label:"URGENT"},{value:"UNRESOLVED",label:"UNRESOLVED"}],Le=function(e){var t=e.map((function(e){return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}}));return[{value:"",label:"UNASSIGNED"}].concat(Object(ge.a)(t))},Pe=function(e,t){if(""===t)return[{value:"",label:"UNASSIGNED"}];var a=e.filter((function(e){return e._id===t}))[0];return[{value:a._id,label:"".concat(a.name," ").concat(a.lastname," | ").concat(a.role)}]},we=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={title:"",description:"",status:"",_id:"",assigned_to:null,projectID:"",nextProjID:null},e.handleSubmitModal=function(){},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.handleChangeSelectStatus=function(t){e.setState({status:t.value})},e.handleChangeSelectAssignedTo=function(t){e.setState({assigned_to:t.value})},e.handleChangeSelectAssignedProject=function(t){e.setState({nextProjID:t.value})},e.handleSave=function(){var t=e.state,a=t.title,n=t.description,r=t.status,c={id:t._id,title:a,description:n,status:r,assigned_to:t.assigned_to,projectID:t.projectID,nextProjID:t.nextProjID};e.props.updateTicket(c),e.props.toggleModal()},e}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.editTicket,t=e.title,a=e.description,n=e.status,r=e._id,c=e.assigned_to,l=e.projectID;this.setState({title:t,description:a,status:n,_id:r,assigned_to:c,projectID:l})}},{key:"render",value:function(){var e,t=this.props.users,a=this.props.projects;return o.a.createElement(be.a,{isOpen:this.props.modal,toggle:this.props.toggleModal},o.a.createElement(Oe.a,{toggle:this.props.toggleModal},"EDIT Ticket"),o.a.createElement(ye.a,null,o.a.createElement(ce.a,{onSubmit:this.handleSubmitModal},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"title"},"Title"),o.a.createElement(oe.a,{type:"title",name:"title",id:"title",value:this.state.title,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"description"},"Description"),o.a.createElement(oe.a,{type:"textarea",name:"description",id:"textarea",value:this.state.description,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"status"},"Ticket Status"),o.a.createElement(Ce.a,{name:"statusSelect",onChange:this.handleChangeSelectStatus,options:Ue,defaultValue:(e=this.state.status,[{value:e,label:e}])})),o.a.createElement(Re,{projects:a,id:this.state.projectID,handleChange:this.handleChangeSelectAssignedProject}),t.length>0&&null!=this.state.assigned_to?o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned to"),o.a.createElement(Ce.a,{name:"assignedSelect",onChange:this.handleChangeSelectAssignedTo,options:Le(t),defaultValue:Pe(t,this.state.assigned_to)})):"",o.a.createElement(le.a,null,o.a.createElement(ie.a,{color:"secondary"},"Cancel"),o.a.createElement(ie.a,{onClick:this.handleSave,color:"success"},"Save")))))}}]),a}(s.Component),xe=Object(f.c)(null,{updateTicket:function(e){var t=e.id,a=e.title,n=e.description,r=e.assigned_to,c=e.projectID,l=e.status,s=e.nextProjID;return function(e,o){var i=JSON.stringify({title:a,description:n,assigned_to:r,projectID:c,status:l,nextProjID:s});e(K()),_.a.put("/api/tickets/".concat(t),i,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.T,payload:t.data})})).catch((function(t){e(A(t.response.data,t.response.status,"UPDATE_TICKET_FAIL")),e({type:T.S})}))}}})(we),Ge=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={modal:!1,editTicket:[]},e.handleEdit=function(t){if(e.state.modal)e.setState({modal:!1,editTicket:[]});else{var a=t.target.parentNode.id;a||(a=t.target.id);var n=e.props.ticket.tickets.filter((function(e){return e._id===a}));e.setState({editTicket:n[0],modal:!0})}},e.toggleModal=function(){e.setState({modal:!e.state.modal})},e.getUserFromID=function(t){if(""===t)return"Unassigned";var a=e.props.user.users.filter((function(e){return e._id===t}));return 0!==a.length?a[0].email:"User not Found"},e.getProjectNameFromTicket=function(e,t){if(e.length>0)try{return e.filter((function(e){return e._id===t.projectID}))[0].name}catch(a){console.log(a)}},e.handleView=function(e){var t=e.target.parentNode.id;t||(t=e.target.id),u.a.push("/tickets/view/".concat(t))},e}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getProjects(),this.props.getTickets(),this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.ticket.tickets,a=this.props.project.projects,n=this.props.user.users;return o.a.createElement(b.a,{className:"tickets-list"},this.state.modal?o.a.createElement(xe,{modal:this.state.modal,users:n,projects:a,editTicket:this.state.editTicket,toggleModal:this.toggleModal}):"",o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Tickets List"),o.a.createElement(X.a,null,o.a.createElement(ve.a,{hover:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"title"),o.a.createElement("th",null,"created by"),o.a.createElement("th",null,"assigned_to"),o.a.createElement("th",null,"status"),o.a.createElement("th",null,"Project"),o.a.createElement("th",null,"Edit"),o.a.createElement("th",null,"View"))),o.a.createElement("tbody",null,t.map((function(t){return o.a.createElement("tr",{key:t._id,id:t._id},o.a.createElement("th",null,t._id),o.a.createElement("th",null,t.title),o.a.createElement("th",null,e.getUserFromID(t.created_by)),o.a.createElement("th",null,e.getUserFromID(t.assigned_to)),o.a.createElement("th",null,t.status),o.a.createElement("th",null,e.getProjectNameFromTicket(a,t)),o.a.createElement("th",{id:t._id,onClick:e.handleEdit},o.a.createElement(q.a,{id:t._id,icon:Q.a})),o.a.createElement("th",{onClick:e.handleView,id:t._id},o.a.createElement(q.a,{id:t._id,icon:Q.b})))})))))))}}]),a}(s.Component),Me=Object(f.c)((function(e){return{auth:e.auth,isLoading:e.ticket.isLoading,project:e.project,ticket:e.ticket,user:e.user}}),{getTickets:W,getProjects:N,getUsers:he})(Ge),Fe=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(b.a,{className:"tickets-container"},o.a.createElement(Me,null))}}]),a}(s.Component),Je=Object(f.c)((function(e){return{auth:e.auth}}),null)(Fe),Ve=[{value:"NEW",label:"NEW"},{value:"URGENT",label:"URGENT"},{value:"PROGRESS",label:"PROGRESS"},{value:"UNRESOLVED",label:"UNRESOLVED"}],We=[{value:"NEW",label:"NEW"}],Ke=[{value:"NEW",label:"UNASSIGNED"}],ze=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={title:"",description:"",status:"",projectID:null,assigned_to:""},e.createOptionsUsers=function(){var t=e.props.user.users.map((function(e){return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}}));return[{value:"",label:"UNASSIGNED"}].concat(Object(ge.a)(t))},e.createOptionsProjects=function(){return e.props.project.projects.map((function(e){return{value:e._id,label:e.name}}))},e.createDefaultProject=function(t){if(!t){var a=e.props.project.projects.filter((function(e){return"GENERAL"===e.name}));return a.length>0?[{value:a[0]._id,label:a[0].name}]:[{value:"",label:"GENERAL"}]}},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.handleChangeSelectStatus=function(t){e.setState({status:t.value})},e.handleChangeSelectAssignedTo=function(t){e.setState({assigned_to:t.value})},e.handleChangeSelectAssignedProject=function(t){e.setState({projectID:t.value})},e.handleSave=function(){var t=e.state,a=t.title,n=t.description,r=t.status,c=t.assigned_to,l=t.projectID,s={title:a,description:n,status:r,created_by:e.props.auth.user.id,assigned_to:c,projectID:l};e.props.createTicket(s)},e}return Object(r.a)(a,[{key:"componentWillMount",value:function(){this.props.getUsers(),this.props.getProjects(),this.props.getTickets()}},{key:"render",value:function(){var e=this.props.project.projects,t=this.props.user.users;return o.a.createElement(b.a,null,o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Create a new ticket"),o.a.createElement(ce.a,{onSubmit:this.handleSubmit},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"title"},"Title"),o.a.createElement(oe.a,{type:"title",name:"title",id:"title",value:this.state.title,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"description"},"Description"),o.a.createElement(oe.a,{type:"textarea",name:"description",id:"textarea",value:this.state.description,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"status"},"Ticket Status"),o.a.createElement(Ce.a,{name:"statusSelect",onChange:this.handleChangeSelectStatus,options:Ve,defaultValue:We})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned Project"),o.a.createElement(Ce.a,{name:"assignedProject",onChange:this.handleChangeSelectAssignedProject,options:this.createOptionsProjects(e),defaultValue:this.createDefaultProject()})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned to"),o.a.createElement(Ce.a,{name:"assignedSelect",onChange:this.handleChangeSelectAssignedTo,options:this.createOptionsUsers(t),defaultValue:Ke})),o.a.createElement(le.a,null,o.a.createElement(ie.a,{color:"secondary"},"Cancel"),o.a.createElement(ie.a,{onClick:this.handleSave,color:"success"},"Save")))))}}]),a}(s.Component),Ye=Object(f.c)((function(e){return{auth:e.auth,isLoading:e.ticket.isLoading,ticket:e.ticket,project:e.project,user:e.user}}),{getTickets:W,getProjects:N,getUsers:he,createTicket:function(e){var t=e.title,a=e.description,n=e.status,r=e.assigned_to,c=e.created_by,l=e.projectID;return function(e,s){e({type:T.l});var o=JSON.stringify({title:t,description:a,assigned_to:r,created_by:c,status:n,projectID:l});_.a.post("/api/tickets",o,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.n,payload:t.data}),u.a.push("/tickets")})).catch((function(t){e(A(t.response.data,t.response.status,"CREATE_TICKET_FAIL")),e({type:T.m})}))}}})(ze),Xe=function(e){var t=e.users,a=e.userList;return o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned Users"),o.a.createElement(Ce.a,{name:"assignedProject",onChange:e.handleChange,options:function(e){try{var t=e.map((function(e){return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}}));return Object(ge.a)(t)}catch(a){console.log("err: ",a)}}(t),defaultValue:function(e,t){if(t.length>0)return e.map((function(e){if(t.includes(e._id))return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}}))}(t,a),isMulti:!0}))},He=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={name:"",description:"",status:"",_id:null,assigned_to:null,projectID:"",nextProjID:null,userList:null,nextUserList:null},e.handleSubmitModal=function(){},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.handleSave=function(){var t=e.state,a=t.name,n=t.description,r=t._id,c=[];e.state.nextUserList&&(c=e.state.nextUserList.map((function(e){return e.value})));var l={name:a,description:n,_id:r,nextUsers:c};e.props.updateProject(l),e.props.toggleModal()},e.handleChangeSelectAssignedUsers=function(t){e.setState({nextUserList:t})},e}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.editProject,t=e.name,a=e.description,n=e._id,r=e.userList;this.setState({name:t,description:a,_id:n,userList:r})}},{key:"render",value:function(){var e=this.props.users;return o.a.createElement(be.a,{isOpen:this.props.modal,toggle:this.props.toggleModal},o.a.createElement(Oe.a,{toggle:this.props.toggleModal},"EDIT Ticket"),o.a.createElement(ye.a,null,o.a.createElement(ce.a,{onSubmit:this.handleSave},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"name"},"Name"),o.a.createElement(oe.a,{type:"name",name:"name",id:"name",value:this.state.name,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"description"},"Description"),o.a.createElement(oe.a,{type:"textarea",name:"description",id:"textarea",value:this.state.description,onChange:this.handleChange})),o.a.createElement(Xe,{users:e,userList:this.state.userList,handleChange:this.handleChangeSelectAssignedUsers}),o.a.createElement(le.a,null,o.a.createElement(ie.a,{color:"secondary"},"Cancel"),o.a.createElement(ie.a,{onClick:this.handleSave,color:"success"},"Save")))))}}]),a}(s.Component),Be=Object(f.c)(null,{updateProject:function(e){var t=e.name,a=e.description,n=e._id,r=e.nextUsers;return function(e,c){e({type:T.P});var l=JSON.stringify({name:t,description:a,_id:n,nextUsers:r});_.a.put("/api/projects",l,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.R,payload:t.data})})).catch((function(t){e(A(t.response.data,t.response.status)),e({type:T.Q})}))}}})(He),Ze=a(37),qe=a(183),Qe=function(e){var t=Object(s.useState)(!1),a=Object(Ze.a)(t,2),n=a[0],r=a[1],c=function(){return r(!n)};return o.a.createElement("div",null,o.a.createElement("th",{onClick:c},o.a.createElement(q.a,{icon:Q.d})),o.a.createElement(be.a,{isOpen:n,toggle:c},o.a.createElement(Oe.a,{toggle:c},"Warning"),o.a.createElement(ye.a,null,"This project may contain multiple tickets, are you sure to delete this project and all its related tickets ? Warning !! this action is irreversible"),o.a.createElement(qe.a,null,o.a.createElement(ie.a,{color:"danger",onClick:function(){e.delete(e.projectID),c()}},"DELETE"),o.a.createElement(ie.a,{color:"secondary",onClick:c},"Cancel"))))},$e=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={modal:!1,editProject:null},e.toggleModal=function(t){if(e.state.modal)e.setState({modal:!1,editProject:null});else{var a=t.target.parentNode.id;a||(a=t.target.id),e.setState({modal:!0,editProject:e.props.project.projects.filter((function(e){return e._id===a}))[0]})}},e.handleDelete=function(t){e.props.deleteProject(t)},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getProjects(),this.props.getUsers()}},{key:"render",value:function(){var e=this,t=this.props.project.projects;return o.a.createElement(b.a,null,this.state.modal?o.a.createElement(Be,{users:this.props.user.users,modal:this.state.modal,projects:t,editProject:this.state.editProject,toggleModal:this.toggleModal}):"",o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Project List"),o.a.createElement(X.a,null,o.a.createElement(ve.a,{hover:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Description"),o.a.createElement("th",null,"Tickets"),o.a.createElement("th",null,"Edit"),o.a.createElement("th",null,"Delete"))),o.a.createElement("tbody",null,t.map((function(t){var a=t.tickets?t.tickets.length:0;return o.a.createElement("tr",{key:t._id},o.a.createElement("th",null,t._id),o.a.createElement("th",null,t.name),o.a.createElement("th",null,t.description),o.a.createElement("th",null,a),o.a.createElement("th",{id:t._id,onClick:e.toggleModal},o.a.createElement(q.a,{id:t._id,icon:Q.a})),o.a.createElement(Qe,{projectID:t._id,delete:e.handleDelete}))})))))))}}]),a}(s.Component),et=Object(f.c)((function(e){return{auth:e.auth,isLoading:e.ticket.isLoading,project:e.project,user:e.user}}),{getUsers:he,getProjects:N,deleteProject:function(e){return function(t,a){t({type:T.o}),_.a.delete("/api/projects/".concat(e)).then((function(e){t({type:T.q,payload:e.data})})).catch((function(e){console.log("error, ",e),t(A(e.response.data,e.response.status,"DELETE_PROJECT_FAIL")),t({type:T.p})}))}}})($e),tt=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(b.a,{className:"projects-container"},o.a.createElement(et,null))}}]),a}(s.Component),at=Object(f.c)((function(e){return{auth:e.auth}}),null)(tt),nt=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={name:"",description:""},e.handleChange=function(t){e.setState(Object(re.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=e.state,a={name:t.name,description:t.description};e.props.addProject(a)},e}return Object(r.a)(a,[{key:"render",value:function(){return o.a.createElement(b.a,null,o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Create a new project"),o.a.createElement(ce.a,{onSubmit:this.handleSubmit},o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"name"},"name"),o.a.createElement(oe.a,{type:"name",name:"name",id:"name",value:this.state.name,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"description"},"Description"),o.a.createElement(oe.a,{type:"textarea",name:"description",id:"textarea",value:this.state.description,onChange:this.handleChange})),o.a.createElement(le.a,null,o.a.createElement(ie.a,{color:"secondary"},"Cancel"),o.a.createElement(ie.a,{onClick:this.handleSubmit,color:"success"},"Save")))))}}]),a}(s.Component),rt=Object(f.c)(null,{addProject:function(e){var t=e.name,a=e.description;return function(e,n){e({type:T.a});var r=JSON.stringify({name:t,description:a});_.a.post("/api/projects",r,{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:T.c,payload:t.data}),u.a.push("/projects/view")})).catch((function(t){console.log("error, ",t),e(A(t.response.data,t.response.status,"ADD_PROJECT_FAIL")),e({type:T.b})}))}}})(nt),ct=a(54),lt=a.n(ct),st=a(87),ot=a(185),it=function(e){var t=e.answer;return o.a.createElement(Y.a,null,o.a.createElement(je.a,null,o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("span",null,e.getUserFromId(t.created_by))),o.a.createElement(m.a,null,o.a.createElement("span",null,new Date(t.date).toUTCString())),o.a.createElement(m.a,{md:"1"},o.a.createElement("th",{className:"row align-items-end",onClick:e.handleDelete,id:t.replyID},o.a.createElement(q.a,{id:t.replyID,icon:Q.d}))))),o.a.createElement(X.a,null,t.reply))},ut=a(184),dt=a(190),mt=function(e){var t=Object(s.useState)(),a=Object(Ze.a)(t,2),n=a[0],r=a[1];return o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Reply"),o.a.createElement(ut.a,null,o.a.createElement(oe.a,{placeholder:"and...",value:n,onChange:function(e){r(e.target.value)}}),o.a.createElement(dt.a,{addonType:"append"},o.a.createElement(ie.a,{onClick:function(){r(""),e.handleAddReply(n)},color:"success"},"Reply"))))},pt=function(e){var t=e.users,a=e.assigned_to;return o.a.createElement(le.a,null,o.a.createElement(se.a,{for:"assigned"},"Assigned User"),o.a.createElement(Ce.a,{name:"assignedProject",onChange:e.handleChange,options:function(e){var t=e.map((function(e){return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}}));return[{value:"",label:"UNSASSIGNED"}].concat(Object(ge.a)(t))}(t),defaultValue:function(e,t){return""!==t?e.map((function(e){if(e._id===t)return{value:e._id,label:"".concat(e.name," ").concat(e.lastname," | ").concat(e.role)}})):[{value:"",label:"UNSASSIGNED"}]}(t,a)}))},ht=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={nextAssignedUser:null},e.handleAddReply=function(t){var a=e.props.match.params,n=e.props.auth.user,r=e.props.ticket.ticket.status;e.props.addReply(t,a.id,n.id,r)},e.handleDelete=function(t){var a=t.target.parentNode.id;a||(a=t.target.id);var n=e.props.ticket.ticket._id,r=a;e.props.deleteReply(n,r)},e.getUserFromID=function(t){var a=e.props.user.users.filter((function(e){return e._id===t}));return 0!==a.length?a[0].email:"User not Found"},e.handleChangeSelectUser=function(t){e.setState({nextAssignedUser:t.value})},e.handleSaveSelectUser=function(){var t=e.props.ticket.ticket._id,a=e.state.nextAssignedUser;e.props.setAssignedTo(t,a),e.setState({nextAssignedUser:null})},e.handleMarkAsCompleted=function(){var t=e.props.ticket.ticket._id,a=e.props.auth.user;e.props.setCompletedTicket(t,a.id)},e}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=Object(st.a)(lt.a.mark((function e(){var t;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params,e.next=3,this.props.getTicket(t.id);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){if(e.location.key!==this.props.location.key){var t=this.props.match.params;this.props.getTicket(t.id)}}},{key:"render",value:function(){var e=this,t=this.props.ticket.ticket,a=this.props.user.users,n=t.answers,r=this.getUserFromID(t.created_by),c=this.getUserFromID(t.assigned_to),l=this.props.ticket.isLoading;return o.a.createElement(b.a,{className:"viewsingleticket-container"},o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(b.a,{className:"viewsingleticket-display-ticket"},o.a.createElement(Y.a,null,o.a.createElement(je.a,null,o.a.createElement(d.a,null,o.a.createElement(m.a,{className:"text-center"},t.title))),o.a.createElement(je.a,null,o.a.createElement(b.a,{className:"themed-container"},o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("span",null,"Created_by: ",r)),o.a.createElement(m.a,null,o.a.createElement("span",null,"Assigned_to: ",c)),o.a.createElement(m.a,null,o.a.createElement("span",null,new Date(t.date).toUTCString())),t.isCompleted?o.a.createElement(m.a,{xs:"1",sm:"3",md:"2"},o.a.createElement(ot.a,{color:"danger"},"Completed")):o.a.createElement(m.a,{xs:"1",sm:"3",md:"2"},o.a.createElement(ot.a,{color:"danger"},t.status))))),o.a.createElement(X.a,null,t.description)),n.map((function(t){return o.a.createElement(it,{getUserFromId:e.getUserFromID,answer:t,handleDelete:e.handleDelete})})),o.a.createElement(mt,{handleAddReply:this.handleAddReply}))),o.a.createElement(m.a,{xs:"1",sm:"3"},o.a.createElement(b.a,{className:"viewsingleticketcontainer-optionsContainer"},t.isCompleted?"":o.a.createElement(ie.a,{color:"danger",onClick:this.handleMarkAsCompleted},"Mark as Completed"),l?"":o.a.createElement(pt,{users:a,assigned_to:t.assigned_to,handleChange:this.handleChangeSelectUser}),this.state.nextAssignedUser?o.a.createElement(ie.a,{color:"success",onClick:this.handleSaveSelectUser},"Reassign"):""))))}}]),a}(s.Component),Et=Object(f.c)((function(e){return{auth:e.auth,user:e.user,isLoading:e.ticket.isLoading,project:e.project,ticket:e.ticket}}),{getTicket:function(e){return function(t,a){t(K()),t({type:T.x}),_.a.get("/api/tickets/".concat(e)).then((function(e){t({type:T.B,payload:e.data})})).catch((function(e){t(A(e.response.data,e.response.status)),t({type:T.A})}))}},getUsers:he,addReply:function(e,t,a,n){return function(r,c){var l=JSON.stringify({reply:e,userID:a,status:n});_.a.post("/api/reply/".concat(t),l,{headers:{"Content-Type":"application/json"}}).then((function(e){r({type:T.d,payload:e.data})})).catch((function(e){r(A(e.response.data,e.response.status,"ADD_REPLY_FAIL")),r({type:T.e})}))}},deleteReply:function(e,t){return function(a,n){_.a.delete("/api/reply",{data:{ticketID:e,answerID:t}}).then((function(e){a({type:T.r,payload:e.data})})).catch((function(e){a(A(e.response.data,e.response.status,"DELETE_REPLY_FAIL")),a({type:T.s})}))}},clearTicket:function(){return function(e){e({type:T.j})}},setCompletedTicket:function(e,t){return function(a){var n=JSON.stringify({userID:t});_.a.put("/api/tickets/setCompletedTicket/".concat(e),n,{headers:{"Content-Type":"application/json"}}).then((function(e){a({type:T.k,payload:e.data})})).catch((function(e){a(A(e.response.data,e.response.status,"COMPLETED_TICKET_FAIL"))}))}},setAssignedTo:function(e,t){return function(a){var n=JSON.stringify({userID:t});_.a.put("/api/tickets/setAssignedTo/".concat(e),n,{headers:{"Content-Type":"application/json"}}).then((function(e){a({type:T.O,payload:e.data})})).catch((function(e){console.log("err: ",e),a(A(e.response.data,e.response.status,"UPDATE_ASSIGNED_TO_FAIL"))}))}}})(ht),ft=function(e){var t=e.tickets,a=e.role,n=e.users,r="ADMIN"===a||"PROJECT_MANAGER",c=function(e){if(""===e)return"Unassigned";var t=n.filter((function(t){return t._id===e}));return 0!==t.length?t[0].email:"User not Found"},l=function(e){var t=e.target.parentNode.id;t||(t=e.target.id),u.a.push("/tickets/view/".concat(t))},s=function(){};return o.a.createElement(Y.a,null,o.a.createElement(je.a,null,"Tickets List"),o.a.createElement(X.a,null,o.a.createElement(ve.a,{hover:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"title"),o.a.createElement("th",null,"created by"),o.a.createElement("th",null,"assigned_to"),o.a.createElement("th",null,"status"),r?o.a.createElement("th",null,"Edit"):"",o.a.createElement("th",null,"View"))),o.a.createElement("tbody",null,t.map((function(e){return o.a.createElement("tr",{key:e._id,id:e._id},o.a.createElement("th",null,e.title),o.a.createElement("th",null,c(e.created_by)),o.a.createElement("th",null,c(e.assigned_to)),o.a.createElement("th",null,e.status),r?o.a.createElement("th",{id:e._id,onClick:s},o.a.createElement(q.a,{id:e._id,icon:Q.a})):"",o.a.createElement("th",{onClick:l,id:e._id},o.a.createElement(q.a,{id:e._id,icon:Q.b})))}))))))},gt=a(186),jt=a(189),vt=a(187),bt=a(188),Ot=function(e){var t=e.user,a=e.index,n=Object(s.useState)(!1),r=Object(Ze.a)(n,2),c=r[0],l=r[1];return o.a.createElement(Y.a,{id:"popover".concat(a),style:{width:"50px",height:"50px"}},o.a.createElement(gt.a,{top:!0,width:"50%",src:"/avatar.png",alt:"Card image cap"}),o.a.createElement(jt.a,{placement:"bottom",isOpen:c,target:"popover".concat(a),toggle:function(){return l(!c)}},o.a.createElement(vt.a,null,"".concat(t.name," ").concat(t.lastname)),o.a.createElement(bt.a,null,t.email)))},yt=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.match.params,t=this.props.project.projects,a=this.props.ticket.tickets,n=this.props.user.users,r=this.props.auth.role,c=t.filter((function(t){return t._id===e.id}))[0],l=a.filter((function(e){return e.projectID===c._id})),s=n.filter((function(e){return c.userList.includes(e._id)}));return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement(b.a,null,o.a.createElement(Y.a,null,o.a.createElement(je.a,null,c.name),o.a.createElement(X.a,null,c.description)),o.a.createElement(ft,{tickets:l,users:n,role:r}))),o.a.createElement(m.a,{className:"detailsproject-options-container"},o.a.createElement(d.a,null,s.map((function(e,t){return o.a.createElement(m.a,{xs:"2"},o.a.createElement(Ot,{user:e,index:t}))})))))}}]),a}(s.Component),kt=Object(f.c)((function(e){return{auth:e.auth,user:e.user,isLoading:e.ticket.isLoading,project:e.project,ticket:e.ticket}}),null)(yt),Ct=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"commponentDidMount",value:function(){this.props.getTickets(),this.props.getProjects()}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated!==this.props.auth.isAuthenticated&&e.auth.isAuthenticated&&(this.props.getProjects(),this.props.getTickets(),this.props.getUsers())}},{key:"render",value:function(){var e=u.a.location;return o.a.createElement("div",null,o.a.createElement(d.a,null,o.a.createElement(L,null)),o.a.createElement(d.a,null,this.props.auth.isAuthenticated&&"/"!==e.pathname?o.a.createElement(m.a,{className:"sidebar-container"},o.a.createElement(F,{role:this.props.auth.role,tickets:this.props.ticket.tickets,projects:this.props.project.projects})):"",o.a.createElement(m.a,null,o.a.createElement("div",{className:"main-container"},o.a.createElement(i.d,null,o.a.createElement("main",null,o.a.createElement(i.b,{exact:!0,path:"/",component:V}),o.a.createElement(i.b,{path:"/register",component:de}),o.a.createElement(i.b,{path:"/login",component:pe}),o.a.createElement(h,{exact:!0,path:"/home",auth:this.props.auth},o.a.createElement(ne,null)),o.a.createElement(h,{exact:!0,path:"/tickets",auth:this.props.auth},o.a.createElement(Je,null)),o.a.createElement(E,{path:"/users",auth:this.props.auth,role:this.props.auth.role},o.a.createElement(Ie,null)),o.a.createElement(E,{path:"/tickets/create",auth:this.props.auth,role:this.props.auth.role},o.a.createElement(Ye,null)),o.a.createElement(E,{path:"/projects",auth:this.props.auth,role:this.props.auth.role}),o.a.createElement(E,{path:"/projects/view",auth:this.props.auth,role:this.props.auth.role},o.a.createElement(at,null)),o.a.createElement(E,{path:"/tickets/view/:id",auth:this.props.auth,role:this.props.auth.role,component:Et}),o.a.createElement(E,{path:"/projects/create",auth:this.props.auth,role:this.props.auth.role},o.a.createElement(rt,null)),o.a.createElement(h,{path:"/project/view/:id",auth:this.props.auth,role:this.props.auth.role,component:kt})))))))}}]),a}(s.Component);t.a=Object(f.c)((function(e){return{auth:e.auth,router:e.router,isLoading:e.ticket.isLoading,project:e.project,ticket:e.ticket}}),{getTickets:W,getProjects:N,getUsers:he})(Ct)},92:function(e,t,a){e.exports=a(93)},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),s=(a(98),a(83)),o=a(90),i=a(9),u=a(14),d=a(48);l.a.render(r.a.createElement(d.AppContainer,null,r.a.createElement(i.a,{store:u.c},r.a.createElement(o.a,{loading:null,persistor:u.b},r.a.createElement(s.a,{history:u.a})))),document.getElementById("root"))},98:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.c1d363ae.chunk.js.map